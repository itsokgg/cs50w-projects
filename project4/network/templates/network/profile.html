{% extends "network/layout.html" %}

{% block body %}
    <h4>Profile</h4>
    <h1>{{ username }}</h1>
    <h5>Followers: {{ follows }}</h5>
    <h5>Following: {{ following }}</h5>
    
    <form action="{% url 'follow' %}" method="post">
        {% csrf_token %}
        {% if follow_status == 'following' %}
            <button class="btn btn-primary" name="action" value="unfollow">unfollow</button>
            
        {% elif follow_status == 'not_following' %}
            <button class="btn btn-primary" name="action" value="follow">Follow</button>
        {% endif %}
        <input name="username" value="{{ username }}" hidden>
    </form>

    <h3>Posts:</h3>
    {% for post in page %}
        <div class="card">
            <div class="card-body">
                <i>{{ post.timestamp }}</i>
                {% if user.username == username %}
                    <div class="edit" data-text="{{ post.text }}" data-id="{{ post.id }}"></div>
                    ❤️{{ post.likes }}
                {% else %}
                    <p>{{ post.text }}</p>
                    <div class="edit-likes" data-likes="{{ post.likes }}" data-id="{{ post.id }}" data-liked="{{ post.liked }}"></div>
                {% endif %}  
            </div>
        </div>
    {% endfor %}

    <nav>
        <ul class="pagination">
            {% if page.has_previous %}   
                <li class="page-item"><a class="page-link" href="?page={{ page.previous_page_number }}">previous</a></li>
            {% endif %}
            {% if page.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ page.next_page_number }}">next</a></li>
            {% endif %}
        </ul>
    </nav>
{% endblock %}